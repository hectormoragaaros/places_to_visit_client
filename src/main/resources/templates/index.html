<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Places to Visit</title>
<!-- adding leaflet -->
<link rel="stylesheet"
	href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css"
	integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14="
	crossorigin="" />
<!-- adding bootstrap -->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
	integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
	crossorigin="anonymous">
<!-- Make sure you put this AFTER Leaflet's CSS -->
<script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
	integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg="
	crossorigin=""></script>
<style>
html, body {
	height: 100%;
	margin: 0;
}

.leaflet-container {
	height: 600px;
	width: 800px;
	max-width: 100%;
	max-height: 100%;
}
</style>
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-xs-6 col-sm-4 col-lg-2">
				<form method="post" autocomplete="off" action="#"
					th:action="@{/map/searchTAs}" th:object="${country}">
					<label class="control-label" for="countryId" th:text="Country"></label>
					<div>
						<select class="form-control" id="countryId" th:field="*{id}">
							<option value="">Select Country</option>
							<option th:each="ciudad: ${countries}" th:value="${ciudad.id}"
								th:text="${ciudad.nombre}"></option>
						</select>
					</div>
					<button class="btn btn-primary" type="submit">Search</button>
				</form>
			</div>
			<div class="col-xs-6 col-sm-8 col-lg-10" th:if="${touristicAttractions!=null}">
				<table class="table table-responsive table-bordered table-striped">
					<caption>Listado de atracciones turísticas</caption>
					<thead>
						<tr>
							<th>País</th>
							<th>Atracción Turística</th>
							<th>Posición</th>
							<th>URL</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="touristicAttraction,iterator : ${touristicAttractions}">
							<td th:text="${country.nombre}"></td>
							<td th:text="${touristicAttraction.nombre}"></td>
							<td th:text="${touristicAttraction.ubicacion}"></td>
							<td th:text="${iterator.index}"></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="row" th:if="${touristicAttractions!=null}">
			<div id="map" style="width: 800px; height: 600px;"></div>
	<script th:inline="javascript">
	/*<![CDATA[*/
		var centroidX = /*[[${mapCentroid.X}]]*/0;
		var centroidY = /*[[${mapCentroid.Y}]]*/0;
		const map = L.map('map').setView([centroidX, centroidY], 2);
		/*[# th:each="TAS : ${touristicAttractions}"]*/
		var xcoord = /*[[${TAS.ubicacion.coordinates[0].x}]]*/0;
		var ycoord = /*[[${TAS.ubicacion.coordinates[0].y}]]*/0;
		var marker = L.marker([xcoord, ycoord]).addTo(map);
		/*[/]*/
	const tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
		maxZoom: 13,
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
	}).addTo(map);		
	/*]]>*/
	</script>
			
		</div>
	</div>
</body>
</html>